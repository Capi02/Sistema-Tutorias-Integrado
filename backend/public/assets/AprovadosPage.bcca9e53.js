import{a as h,b as C,Q as y}from"./QMenu.a0461e97.js";import{Q as w,a as B,C as x}from"./ClosePopup.97d7bfb8.js";import{e as X,Q as Y,a as Z,b as $}from"./export-file.b10388b7.js";import{_ as ee,u as ae,r as t,c as M,o as D,l as oe,m as n,aq as m,q as d,d as l,p as o,F as p,ar as k,s as Q,n as v,t as _,as as b,Q as re,at as le,au as te}from"./index.a087d920.js";import{u as ne}from"./use-quasar.5151adfb.js";import{a as g}from"./axios.7331a07d.js";import"./use-dark.b66c2986.js";import"./use-prevent-scroll.cb9388ba.js";import"./focus-manager.02955f48.js";import"./uid.42677368.js";import"./QSelect.457920ea.js";import"./use-field.fd25eba3.js";import"./QChip.a53fc1c7.js";import"./use-form.5d6a531f.js";import"./use-key-composition.ec24de95.js";import"./format.3e32b8d9.js";import"./QLinearProgress.622d7e3a.js";import"./QCheckbox.0a877cfa.js";import"./use-checkbox.cc118b78.js";const P=[{name:"nombre",required:!0,label:"Nombre",align:"left",field:s=>s.nombre,format:s=>`${s}`,sortable:!0},{name:"beca",align:"center",label:"Beca",field:"beca",sortable:!0},{name:"carrera",label:"Carrera",field:"carrera",sortable:!0},{name:"area",label:"\xC1rea",field:"area"},{name:"grado",label:"Grado",field:"grado"},{name:"genero",label:"G\xE9nero",field:"genero"},{name:"idsolicitud",label:"Solicitud",field:"idsolicitud"}];function z(s,i,G){let a=i!==void 0?i(s,G):s;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}const se={name:"DetailsPage",data(){return{}},methods:{loadData(){}},components:{},setup(){const s=ae(),i=t([]),G=ne(),a=t(null),I=t([]),E=t([]),q=t([]),r=t([]),c=t([]),S=t(null),A=t(null),T=t(null),N=t(null),V=t(!1),j=t(!1),L=t(!1),F=t(!1),R=t(!1),J=M(()=>i.value.filter(e=>{const O=!a.value||e.beca===a.value,f=!S.value||e.carrera===S.value,u=!A.value||e.area===A.value,U=!T.value||e.grado===T.value,W=!N.value||e.genero===N.value;return O&&f&&u&&U&&W}));M(()=>s.currentRoute.value.params.idsolicitud),D(()=>{g.get("http://127.0.0.1:3000/api/becas/all").then(e=>{I.value=e.data}).catch(e=>{console.error("Error al obtener las becas:",e)})}),D(()=>{g.get("http://127.0.0.1:3000/api/carrera").then(e=>{E.value=e.data}).catch(e=>{console.error("Error al obtener las carreras:",e)})}),D(()=>{g.get("http://127.0.0.1:3000/api/area").then(e=>{q.value=e.data}).catch(e=>{console.error("Error al obtener las areas:",e)})}),D(()=>{g.get("http://127.0.0.1:3000/api/grado").then(e=>{r.value=e.data}).catch(e=>{console.error("Error al obtener las grados:",e)})}),D(()=>{g.get("http://127.0.0.1:3000/api/genero").then(e=>{c.value=e.data}).catch(e=>{console.error("Error al obtener las generos:",e)})}),g.get("http://127.0.0.1:3000/api/columns/aprovadas").then(e=>{i.value=e.data}).catch(e=>{console.error("Error al obtener los datos:",e)});function K(e,O){switch(O){case"beca":a.value=e;break;case"carrera":S.value=e;break;case"area":A.value=e;break;case"grado":T.value=e;break;case"genero":N.value=e;break}V.value=!1,j.value=!1,L.value=!1,F.value=!1,R.value=!1}return{columns:P,data:i,selectedBeca:a,filteredData:J,onItemClick:K,becas:I,carreras:E,areas:q,grados:r,generos:c,isBecaDropdownOpen:V,isCarreraDropdownOpen:j,isAreaDropdownOpen:L,isGradoDropdownOpen:F,isGeneroDropdownOpen:R,exportTable(){const e=[P.map(f=>z(f.label))].concat(i.value.map(f=>P.map(u=>z(typeof u.field=="function"?u.field(f):f[u.field===void 0?u.name:u.field],u.format,f)).join(","))).join(`\r
`);X("table-export.csv",e,"text/csv")!==!0&&G.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}},H=s=>(le("data-v-55549d37"),s=s(),te(),s),ce=H(()=>d("p",{class:"titulo"},"Becas aprobadas",-1)),de={class:"q-pa-md-container"},ie=H(()=>d("div",{class:"botonesfilt"},[d("p",{class:""},"Botones de filtrado")],-1)),ue={class:"q-pa-md"},me={class:"q-pa-md"},pe={class:"q-pa-md"},fe={class:"q-pa-md"},ve={class:"q-pa-md"},_e={class:"q-pa-md"};function be(s,i,G,a,I,E){const q=oe("router-link");return n(),m(p,null,[ce,d("div",de,[ie,d("div",ue,[l(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Becas","model-value":a.isBecaDropdownOpen},{default:o(()=>[l(B,null,{default:o(()=>[(n(!0),m(p,null,k(a.becas,r=>Q((n(),v(y,{key:r.idbeca,clickable:"",onClick:c=>a.onItemClick(r.beca,"beca")},{default:o(()=>[l(h,null,{default:o(()=>[l(C,null,{default:o(()=>[_(b(r.beca),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[x]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",me,[l(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Carrera","model-value":a.isCarreraDropdownOpen},{default:o(()=>[l(B,null,{default:o(()=>[(n(!0),m(p,null,k(a.carreras,r=>Q((n(),v(y,{key:r.idcarrera,clickable:"",onClick:c=>a.onItemClick(r.carrera,"carrera")},{default:o(()=>[l(h,null,{default:o(()=>[l(C,null,{default:o(()=>[_(b(r.carrera),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[x]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",pe,[l(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Area","model-value":a.isAreaDropdownOpen},{default:o(()=>[l(B,null,{default:o(()=>[(n(!0),m(p,null,k(a.areas,r=>Q((n(),v(y,{key:r.idarea,clickable:"",onClick:c=>a.onItemClick(r.area,"area")},{default:o(()=>[l(h,null,{default:o(()=>[l(C,null,{default:o(()=>[_(b(r.area),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[x]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",fe,[l(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Grado","model-value":a.isGradoDropdownOpen},{default:o(()=>[l(B,null,{default:o(()=>[(n(!0),m(p,null,k(a.grados,r=>Q((n(),v(y,{key:r.idgrado,clickable:"",onClick:c=>a.onItemClick(r.grado,"grado")},{default:o(()=>[l(h,null,{default:o(()=>[l(C,null,{default:o(()=>[_(b(r.grado),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[x]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",ve,[l(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Genero","model-value":a.isGeneroDropdownOpen},{default:o(()=>[l(B,null,{default:o(()=>[(n(!0),m(p,null,k(a.generos,r=>Q((n(),v(y,{key:r.idgenero,clickable:"",onClick:c=>a.onItemClick(r.genero,"genero")},{default:o(()=>[l(h,null,{default:o(()=>[l(C,null,{default:o(()=>[_(b(r.genero),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[x]])),128))]),_:1})]),_:1},8,["model-value"])])]),d("div",_e,[l(Y,{flat:"",bordered:"",title:"Solicitudes aprobadas",rows:a.filteredData,columns:a.columns,color:"primary","row-key":"name"},{body:o(r=>[l(Z,{props:r},{default:o(()=>[(n(!0),m(p,null,k(r.cols,c=>(n(),v($,{key:c.name,props:r},{default:o(()=>[c.name==="nombre"?(n(),v(q,{key:0,to:"/details/"+r.row.idsolicitud},{default:o(()=>[_(b(r.row[c.name]),1)]),_:2},1032,["to"])):(n(),m(p,{key:1},[_(b(r.row[c.name]),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(()=>[l(re,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:a.exportTable},null,8,["onClick"])]),_:1},8,["rows","columns"])])],64)}var Pe=ee(se,[["render",be],["__scopeId","data-v-55549d37"]]);export{Pe as default};
