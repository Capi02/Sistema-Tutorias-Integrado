import{Q as g,a as y,b as C}from"./QMenu.e381fa2f.js";import{Q as w,a as B,C as D}from"./ClosePopup.2afa2955.js";import{e as X,Q as Y,a as Z,b as $}from"./export-file.52a74110.js";import{_ as ee,u as ae,r as n,c as R,o as x,l as le,m as s,aq as m,q as d,d as r,p as l,ar as f,F as p,as as k,Q as oe,at as re,au as te,s as Q,n as _,t as b}from"./index.4d9ae8b7.js";import{u as ne}from"./use-quasar.6a26505b.js";import{a as h}from"./axios.7331a07d.js";import"./use-dark.db2d3901.js";import"./use-prevent-scroll.f4872ba6.js";import"./focus-manager.02955f48.js";import"./uid.42677368.js";import"./QSelect.d90c48dd.js";import"./use-form.641640a1.js";import"./QChip.3c0858c7.js";import"./use-key-composition.03d9e8eb.js";import"./format.3e32b8d9.js";import"./QLinearProgress.ab837cd5.js";import"./use-checkbox.98c7abc1.js";const T=[{name:"nombre",required:!0,label:"Nombre",align:"left",field:t=>t.nombre,format:t=>`${t}`,sortable:!0},{name:"beca",align:"center",label:"Beca",field:"beca",sortable:!0},{name:"carrera",label:"Programa Educativo",field:"carrera",sortable:!0},{name:"area",label:"\xC1rea",field:"area"},{name:"grado",label:"Nivel Educativo",field:"grado"},{name:"genero",label:"G\xE9nero",field:"genero"},{name:"idsolicitud",label:"Solicitud",field:"idsolicitud"}];function z(t,c,G){let a=c!==void 0?c(t,G):t;return a=a==null?"":String(a),a=a.split('"').join('""'),`"${a}"`}const se={computed:{mensajeFechas(){const t=new Date().getMonth()+1;let c="";return t>=6&&t<=9?c="Mayo - Agosto":t>=11||t<=1?c="Septiembre - Diciembre":t>=2&&t<=5&&(c="Enero - Abril"),c}},name:"DetailsPage",data(){return{}},methods:{loadData(){}},components:{},setup(){const t=ae(),c=n([]),G=ne(),a=n(null),O=n([]),q=n([]),E=n([]),o=n([]),i=n([]),S=n(null),j=n(null),A=n(null),N=n(null),V=n(!1),F=n(!1),M=n(!1),L=n(!1),P=n(!1),J=R(()=>c.value.filter(e=>{const I=!a.value||e.beca===a.value,v=!S.value||e.carrera===S.value,u=!j.value||e.area===j.value,U=!A.value||e.grado===A.value,W=!N.value||e.genero===N.value;return I&&v&&u&&U&&W}));R(()=>t.currentRoute.value.params.idsolicitud),x(()=>{h.get("http://127.0.0.1:3000/api/becas/all").then(e=>{O.value=e.data}).catch(e=>{console.error("Error al obtener las becas:",e)})}),x(()=>{h.get("http://127.0.0.1:3000/api/carrera").then(e=>{q.value=e.data}).catch(e=>{console.error("Error al obtener las carreras:",e)})}),x(()=>{h.get("http://127.0.0.1:3000/api/area").then(e=>{E.value=e.data}).catch(e=>{console.error("Error al obtener las areas:",e)})}),x(()=>{h.get("http://127.0.0.1:3000/api/grado").then(e=>{o.value=e.data}).catch(e=>{console.error("Error al obtener las grados:",e)})}),x(()=>{h.get("http://127.0.0.1:3000/api/genero").then(e=>{i.value=e.data}).catch(e=>{console.error("Error al obtener las generos:",e)})}),h.get("http://127.0.0.1:3000/api/columns").then(e=>{c.value=e.data}).catch(e=>{console.error("Error al obtener los datos:",e)});function K(e,I){switch(I){case"beca":a.value=e;break;case"carrera":S.value=e;break;case"area":j.value=e;break;case"grado":A.value=e;break;case"genero":N.value=e;break}V.value=!1,F.value=!1,M.value=!1,L.value=!1,P.value=!1}return{columns:T,data:c,selectedBeca:a,filteredData:J,onItemClick:K,becas:O,carreras:q,areas:E,grados:o,generos:i,isBecaDropdownOpen:V,isCarreraDropdownOpen:F,isAreaDropdownOpen:M,isGradoDropdownOpen:L,isGeneroDropdownOpen:P,exportTable(){const e=[T.map(v=>z(v.label))].concat(c.value.map(v=>T.map(u=>z(typeof u.field=="function"?u.field(v):v[u.field===void 0?u.name:u.field],u.format,v)).join(","))).join(`\r
`);X("table-export.csv",e,"text/csv")!==!0&&G.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}}},H=t=>(re("data-v-1198d1b3"),t=t(),te(),t),ce=H(()=>d("p",{class:"titulo"},"Inicio",-1)),ie={class:"q-pa-md-container"},de=H(()=>d("div",{class:"botonesfilt"},[d("p",{class:""},"Botones de filtrado")],-1)),ue={class:"q-pa-md"},me={class:"q-pa-md"},fe={class:"q-pa-md"},pe={class:"q-pa-md"},ve={class:"q-pa-md"},_e={class:"mensaje-fechas"},be={class:"q-pa-md"};function ke(t,c,G,a,O,q){const E=le("router-link");return s(),m(p,null,[ce,d("div",ie,[de,d("div",ue,[r(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Becas","model-value":a.isBecaDropdownOpen},{default:l(()=>[r(B,null,{default:l(()=>[(s(!0),m(p,null,k(a.becas,o=>Q((s(),_(g,{key:o.idbeca,clickable:"",onClick:i=>a.onItemClick(o.beca,"beca")},{default:l(()=>[r(y,null,{default:l(()=>[r(C,null,{default:l(()=>[b(f(o.beca),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",me,[r(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Carrera","model-value":a.isCarreraDropdownOpen},{default:l(()=>[r(B,null,{default:l(()=>[(s(!0),m(p,null,k(a.carreras,o=>Q((s(),_(g,{key:o.idcarrera,clickable:"",onClick:i=>a.onItemClick(o.carrera,"carrera")},{default:l(()=>[r(y,null,{default:l(()=>[r(C,null,{default:l(()=>[b(f(o.carrera),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",fe,[r(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Area","model-value":a.isAreaDropdownOpen},{default:l(()=>[r(B,null,{default:l(()=>[(s(!0),m(p,null,k(a.areas,o=>Q((s(),_(g,{key:o.idarea,clickable:"",onClick:i=>a.onItemClick(o.area,"area")},{default:l(()=>[r(y,null,{default:l(()=>[r(C,null,{default:l(()=>[b(f(o.area),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",pe,[r(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Nivel","model-value":a.isGradoDropdownOpen},{default:l(()=>[r(B,null,{default:l(()=>[(s(!0),m(p,null,k(a.grados,o=>Q((s(),_(g,{key:o.idgrado,clickable:"",onClick:i=>a.onItemClick(o.grado,"grado")},{default:l(()=>[r(y,null,{default:l(()=>[r(C,null,{default:l(()=>[b(f(o.grado),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["model-value"])]),d("div",ve,[r(w,{color:"secondary",class:"buttoms","text-color":"black",label:"Genero","model-value":a.isGeneroDropdownOpen},{default:l(()=>[r(B,null,{default:l(()=>[(s(!0),m(p,null,k(a.generos,o=>Q((s(),_(g,{key:o.idgenero,clickable:"",onClick:i=>a.onItemClick(o.genero,"genero")},{default:l(()=>[r(y,null,{default:l(()=>[r(C,null,{default:l(()=>[b(f(o.genero),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["model-value"])])]),d("div",_e,[d("p",null,f(q.mensajeFechas),1)]),d("div",be,[r(Y,{flat:"",bordered:"",title:"Solicitudes",rows:a.filteredData,columns:a.columns,color:"primary","row-key":"name"},{body:l(o=>[r(Z,{props:o},{default:l(()=>[(s(!0),m(p,null,k(o.cols,i=>(s(),_($,{key:i.name,props:o},{default:l(()=>[i.name==="nombre"?(s(),_(E,{key:0,to:"/details/"+o.row.idsolicitud},{default:l(()=>[b(f(o.row[i.name]),1)]),_:2},1032,["to"])):(s(),m(p,{key:1},[b(f(o.row[i.name]),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":l(()=>[r(oe,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:a.exportTable},null,8,["onClick"])]),_:1},8,["rows","columns"])])],64)}var Ne=ee(se,[["render",ke],["__scopeId","data-v-1198d1b3"]]);export{Ne as default};
